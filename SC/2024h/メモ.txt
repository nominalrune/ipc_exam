# Q1メモ
## Log4j Lookup機能の問題
`${jndi:ldap://...}` という文字列を、ログ出力メッセージというデータの中に含めると、Log4jのLookup機能がそれを命令として解釈・実行

SQLのプリペアドステートメント（?を使う方法）
なぜLog4jはインジェクションに弱かったのか
SQLインジェクションとLog4Shellの根本的な原因は同じで、「外部から受け取ったデータ（文字列）を、命令（コード）の一部として解釈・実行してしまった」ことです。

良い例（パラメータ化ロギング）
こちらが推奨される書き方です。ログメッセージのテンプレート（ひな形）と、そこに入れるデータを別々の引数として渡します。

```Java
String userInput = request.getParameter("username"); // 外部からの入力
// テンプレートとデータを分離して渡す
logger.info("User: {} logged in.", userInput);
```

# Q2メモ
Q2. 社内ネットワークから外部のWebサイトへアクセスする際など、再帰的な名前解決を行うサーバは何と呼ばれますか？（問題文の略称ではDNS-F）

<details> <summary>答え</summary> フルサービスリゾルバ（またはキャッシュDNSサーバ） </details>

Q5. ポートノッキング（問題文中の設定P）のように、決まった順序でポートにアクセスする認証方式が、通信を盗聴されると突破されてしまうのはなぜですか？

<details> <summary>答え</summary> 正規のアクセス順序が攻撃者に知られてしまい、その順序を模倣（リプレイ）してアクセスされることで、正規利用者として認証されてしまうから。 </details>
Q6. SPA (Single Packet Authorization) が、盗聴されてもリプレイ攻撃に強いのはなぜですか？

<details> <summary>答え</summary> パケットにワンタイムパスワードやランダムな値（ノンス）が含まれており、一度使われたパケットはサーバ側で破棄される仕組みになっているから。 </details>



## リプレイ攻撃 (Replay Attack)
正規の利用者が送受信した通信データ（特に認証情報など）を攻撃者が盗聴しておき、後でそのデータをそのまま再送信することで、正規利用者になりすまして不正なアクセスを試みる攻撃手法です。

攻撃の流れ:

盗聴: 攻撃者は、利用者とサーバ間の通信を盗聴し、ログイン時のID/パスワードやセッションIDなどの認証情報を記録します。
再送信: 攻撃者は、盗聴した認証情報をサーバに再送信（リプレイ）します。
不正アクセス: サーバがその認証情報を正当なものとして受け入れてしまうと、攻撃者は正規利用者として認証され、システムへの不正アクセスが成功します。
対策: 通信データが一度しか使えないようにする仕組み（一意性を持たせる仕組み）が有効です。

タイムスタンプ: 通信に時刻情報を付与し、一定時間以上経過した古い通信を無効にする。
シーケンス番号（通し番号）: 通信に連番を付与し、順序が正しくない通信や重複した番号の通信を無効にする。
ノンス (Nonce): 通信ごとに使い捨てのランダムな値を付与し、サーバ側で一度使われた値を記録しておくことで、同じ値を使った通信を拒否する。
ワンタイムパスワード (OTP): 一度しか使えないパスワードを利用する。

## DDoS対策機能を有するCDNサービス
DDoS防御の仕組み:

トラフィックの吸収・分散: 世界中に広がる多数のサーバで攻撃トラフィックを受け止めることで、特定のサーバに負荷が集中するのを防ぎます。
不正トラフィックのフィルタリング: CDNのエッジサーバ（利用者に最も近いサーバ）が、攻撃と見なされる不正なリクエスト（例: 大量のSYNパケット）を検知し、本来のサーバ（オリジンサーバ）に到達する前に遮断します。
レートリミット: 短時間に大量のリクエストを送ってくるIPアドレスからの通信を一時的に制限・遮断します。
代表的なサービス: Cloudflare, Akamai, AWS CloudFront (AWS Shieldと連携)


## クラウド型ファイアウォールサービス

特徴:

導入・運用の容易さ: 物理的な機器の購入や設置が不要で、迅速に導入できます。運用やメンテナンスはサービス提供事業者が行います。
スケーラビリティ: DDoS攻撃のような急激なトラフィック増加にも、クラウドの能力で柔軟に対応できます。
一元的なポリシー管理: 複数の拠点やリモートワーク環境など、場所を問わず統一されたセキュリティポリシーを適用できます。
DDoS防御の仕組み: 組織への通信を一度クラウド上のファイアウォールで受け、そこでDDoS攻撃などの不正な通信を「洗浄（スクラビング）」し、安全な通信だけを組織のネットワークに転送します。

## ISPが提供するDDoS防御サービス
ISP (Internet Service Provider) が、自社のネットワークを通過する通信を監視し、契約者（企業など）へのDDoS攻撃を検知・緩和するサービスです。

- 特徴:
    - 上流での対策: 攻撃トラフィックが企業のネットワーク境界に到達するよりも前、つまりインターネットのより上流（ISPのネットワーク内）で対処できるのが最大の利点です。
    - 回線帯域の保護: 攻撃によって企業の契約回線が飽和状態になるのを防ぎます。
- DDoS防御の仕組み: ISPのバックボーンネットワークに設置された検知・分析システムが、特定の契約者への異常なトラフィックを検知すると、その通信を迂回させて攻撃パケットをフィルタリング・遮断し、正常な通信のみを契約者に届けます。

# Q2回答
設問1
〔DDoS 攻撃に対する調査〕について答えよ。
(1) 表4中の a に入れる攻撃の例を、H社での攻撃対象を示して具体的に答えよ。

A:公開Webサーバーを攻撃対象に、GETリクエストを大量に送りつける

(2) 本文中の下線①の場合に発生する弊害を 25字以内で答えよ。

A:通常のサービス利用の範囲内でも通信が遮断される

(3) 本文中の b 、 c に入れる適切な字句を、 “DNS-F”又は“DNS-K” から選び答えよ。

A:
b:“DNS-F"
c:“DNS-K”

設問2
【対策 V-1 についての検討] について答えよ。
(1) 表5中の d 、 e に入れる、不正な接続までの攻撃手順を、具体的に答えよ。

A:
d:攻撃者が、正規利用者の入力したIDとパスワードを正規サイトにて入力する
e:正規利用者はセキュリティコードを受取り、それをサイトに入力する

(2) 本文中の下線②について、注意喚起の内容を、具体的に答えよ。

A:
受信したメール内のURLリンクをクリックした場合には認証情報を入力しない

設問3
〔対策 V-3についての検討〕について答えよ。
(1) 本文中の下線③について、設定Pを突破する方法を 30字以内で答えよ。

A:
公衆無線LANとしてR-PCにネット接続を提供し、VPN-Hの通信内容を盗聴したとき

(2) 本文中の下線④について、突破されないのはなぜか。40字以内で答えよ。

A:
盗聴内容をもとにしても、突破可能なリクエストの捏造が困難だから


設問4
[DDoS攻撃に対する具体的対策の検討] について答えよ。
(1) 本文中の下線⑤について、利用する外部のサービスを、20字以内で具体的に答えよ。

A:
Cloudflare

(2) 本文中の下線⑥について、軽減できる理由を、40字以内で答えよ。

A:
取引先向けWebサーバーには、取引先からの正当なリクエスト以外が届かなくなるから

